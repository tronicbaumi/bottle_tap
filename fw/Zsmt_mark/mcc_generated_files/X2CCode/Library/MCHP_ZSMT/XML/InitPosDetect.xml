<?xml version="1.0" encoding="utf-8"?><!--V.0.29--><ControlBlock BlockId="603" BlockName="InitPosDetect" LibraryName="MCHP_ZSMT" Author="rkothbauer" Revision="1.0" DateCreated="2013-02-28" DateLastChange="2020-11-20" Prompt="X2C Initial Position Detection Block" Order="0" SampleTimeFactor="1" TexFile="InitPosDetect_Info" LibraryType="INTERNAL" PreNameSpace="at.lcm.x2c" DefaultImplementation="FiP16" DirectFeedThrough="true" ParameterId="0" IsStaticId="false" IsConversionOnTarget="false" TaskLabel=""><BlockLicense Type="Commercial (LCM)"><CopyrightStatement>Copyright (c) 2018, Linz Center of Mechatronics GmbH (LCM) http://www.lcm.at/
All rights reserved.</CopyrightStatement><LicenseStatement></LicenseStatement><Header>This file is part of X2C. http://x2c.lcm.at/
$LastChangedRevision: 2108 $
$LastChangedDate:: 2020-12-07 19:09:57 +0100#$</Header></BlockLicense><Description>Calculation of initial rotor angle.</Description><Mask Name=""><InportContainer><MaskInport Name="I_A"><Description>Current in phase A</Description><ConnectedOutport Name=""><BlockLink Name=""></BlockLink></ConnectedOutport></MaskInport><MaskInport Name="I_B"><Description>Current in phase B</Description><ConnectedOutport Name=""><BlockLink Name=""></BlockLink></ConnectedOutport></MaskInport><MaskInport Name="I_C"><Description>Current in phase C</Description><ConnectedOutport Name=""><BlockLink Name=""></BlockLink></ConnectedOutport></MaskInport><MaskInport Name="Enable"><Description>Enable = false: Outputs are zero.
Enable = true: Initial rotor angle is determined and enable signal for HF injection is given.</Description><ConnectedOutport Name=""><BlockLink Name=""></BlockLink></ConnectedOutport></MaskInport></InportContainer><OutportContainer><MaskOutport Name="U_A"><Description>Voltage to be applied in phase A</Description></MaskOutport><MaskOutport Name="U_B"><Description>Voltage to be applied in phase B</Description></MaskOutport><MaskOutport Name="U_C"><Description>Voltage to be applied in phase C</Description></MaskOutport><MaskOutport Name="Ready"><Description>Signal to indicate end of initial position detection</Description></MaskOutport><MaskOutport Name="phi0"><Description>Initial position estimate</Description></MaskOutport></OutportContainer><ParameterContainer><MaskParameter Name="U_pulse" Prompt="Voltage pulse amplitude [V]"><Description>Amplitude of voltage pulses used for determination of initial rotor anlge</Description><MaskDouble><Value><Numeric>0.0</Numeric></Value><DefaultValue><Numeric>0.0</Numeric></DefaultValue></MaskDouble></MaskParameter><MaskParameter Name="T_pulse" Prompt="Pulse width [samples]"><Description>Pulse length in samples</Description><MaskDouble><Value><Numeric>1.0</Numeric></Value><DefaultValue><Numeric>1.0</Numeric></DefaultValue></MaskDouble></MaskParameter><MaskParameter Name="T_pause" Prompt="Pause time [ms]"><Description>Time between voltage pulses</Description><MaskDouble><Value><Numeric>4.0</Numeric></Value><DefaultValue><Numeric>4.0</Numeric></DefaultValue></MaskDouble></MaskParameter><MaskParameter Name="U_max" Prompt="Scaling: U_max [V]"><Description>Phase voltage scaling value
(Only used for scaling in fixed point implementations)</Description><MaskDouble><Value><Numeric>0.0</Numeric></Value><DefaultValue><Numeric>0.0</Numeric></DefaultValue></MaskDouble></MaskParameter><MaskParameter Name="ts_fact" Prompt="Sample Time Multiplier"><Description>Multiplication factor of base sampling time (in integer format).</Description><MaskDouble><Value><Numeric>1.0</Numeric></Value><DefaultValue><Numeric>1.0</Numeric></DefaultValue></MaskDouble></MaskParameter></ParameterContainer><Visualizations><Visualization Name="Matlab" Type="VisualizationMatlab"><Command><Item>patch([0 1 1], [0 0 0.2], [0.91 0.84 0])</Item><Item>port_label('input',1,'I_A','texmode','on')</Item><Item>port_label('input',2,'I_B','texmode','on')</Item><Item>port_label('input',3,'I_C','texmode','on')</Item><Item>port_label('input',4,'Enable')</Item><Item>port_label('output',1,'U_A','texmode','on')</Item><Item>port_label('output',2,'U_B','texmode','on')</Item><Item>port_label('output',3,'U_C','texmode','on')</Item><Item>port_label('output',4,'Ready','texmode','on')</Item><Item>port_label('output',5,'\phi_{0}','texmode','on')</Item><Item>disp('\fontsize{20}\phi_{\fontsize{13}0}','texmode', 'on')</Item></Command></Visualization><Visualization Name="ScilabXcos" Type="VisualizationScilabXcos"><ScriptDefineSection></ScriptDefineSection><ScriptPlotSection></ScriptPlotSection><ScriptStyle><Item>style.image = "file:///" + curDir + "/../Doc/Images/InitPosDetect.svg"</Item></ScriptStyle><BlockIconDefaultSize>[5 6]</BlockIconDefaultSize></Visualization></Visualizations></Mask><ImplementationConfig><ExistingImplementationContainer><Implementation Id="1" Name="FiP16" FriendlyName="16 Bit Fixed Point" Author="rkothbauer" Revision="1.0" DateCreated="2013-02-28" DateLastChange="2020-07-23" CFileName="InitPosDetect_FiP16.c" HFileName="InitPosDetect_FiP16.h" UpdateEnabled="true" ChecksumCFile="" ChecksumHFile="" AllowEmptyLoadFnc="false"><Description>16 Bit Fixed Point Implementation</Description><InportContainer><ImplementationInport Name="I_A" DataType="INT16"></ImplementationInport><ImplementationInport Name="I_B" DataType="INT16"></ImplementationInport><ImplementationInport Name="I_C" DataType="INT16"></ImplementationInport><ImplementationInport Name="Enable" DataType="BOOL"></ImplementationInport></InportContainer><OutportContainer><ImplementationOutport Name="U_A" DataType="INT16"></ImplementationOutport><ImplementationOutport Name="U_B" DataType="INT16"></ImplementationOutport><ImplementationOutport Name="U_C" DataType="INT16"></ImplementationOutport><ImplementationOutport Name="Ready" DataType="BOOL"></ImplementationOutport><ImplementationOutport Name="phi0" DataType="INT16"></ImplementationOutport></OutportContainer><ParameterContainer><ImplementationParameter Name="u_pulse" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Magnitude of voltage phasor</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="t_pulse" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Pulse width</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="t_period" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Duration of one injection period</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="timer" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Loop counter</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="dir" DataType="INT8" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Direction of voltage pulse: DIR=-1-&gt;neg. Phase A, -2=neg. phase B, -3=neg. phase C, 1=phase A, 2=phase B, 3=phase C</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="phi" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Commutation angle during pulsing</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ia_pos" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase A direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ia_neg" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase A direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ib_pos" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase B direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ib_neg" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase B direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ic_pos" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase C direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ic_neg" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase C direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter></ParameterContainer><Conversion Type="Java"></Conversion><FunctionLink Status="false" BlockName="" ImplementationName=""></FunctionLink></Implementation><Implementation Id="2" Name="FiP32" FriendlyName="32 Bit Fixed Point" Author="sfragner" Revision="1" DateCreated="2020-07-20" DateLastChange="2020-07-23" CFileName="InitPosDetect_FiP32.c" HFileName="InitPosDetect_FiP32.h" UpdateEnabled="true" ChecksumCFile="" ChecksumHFile="" AllowEmptyLoadFnc="false"><Description>32 Bit Fixed Point Implementation</Description><InportContainer><ImplementationInport Name="I_A" DataType="INT32"></ImplementationInport><ImplementationInport Name="I_B" DataType="INT32"></ImplementationInport><ImplementationInport Name="I_C" DataType="INT32"></ImplementationInport><ImplementationInport Name="Enable" DataType="BOOL"></ImplementationInport></InportContainer><OutportContainer><ImplementationOutport Name="U_A" DataType="INT32"></ImplementationOutport><ImplementationOutport Name="U_B" DataType="INT32"></ImplementationOutport><ImplementationOutport Name="U_C" DataType="INT32"></ImplementationOutport><ImplementationOutport Name="Ready" DataType="BOOL"></ImplementationOutport><ImplementationOutport Name="phi0" DataType="INT32"></ImplementationOutport></OutportContainer><ParameterContainer><ImplementationParameter Name="u_pulse" DataType="INT32" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Magnitude of voltage phasor</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="t_pulse" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Pulse width</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="t_period" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Duration of one injection period</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="timer" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Loop counter</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="dir" DataType="INT8" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Direction of voltage pulse: DIR=-1-&gt;neg. Phase A, -2=neg. phase B, -3=neg. phase C, 1=phase A, 2=phase B, 3=phase C</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="phi" DataType="INT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Commutation angle during pulsing</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ia_pos" DataType="INT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase A direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ia_neg" DataType="INT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase A direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ib_pos" DataType="INT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase B direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ib_neg" DataType="INT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase B direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ic_pos" DataType="INT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase C direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ic_neg" DataType="INT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase C direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter></ParameterContainer><Conversion Type="Java"></Conversion><FunctionLink Status="false" BlockName="" ImplementationName=""></FunctionLink></Implementation><Implementation Id="3" Name="Float32" FriendlyName="32 Bit Floating Point" Author="sfragner" Revision="1" DateCreated="2020-07-20" DateLastChange="2020-07-23" CFileName="InitPosDetect_Float32.c" HFileName="InitPosDetect_Float32.h" UpdateEnabled="true" ChecksumCFile="" ChecksumHFile="" AllowEmptyLoadFnc="false"><Description>32 Bit Floating Point Implementation</Description><InportContainer><ImplementationInport Name="I_A" DataType="FLOAT32"></ImplementationInport><ImplementationInport Name="I_B" DataType="FLOAT32"></ImplementationInport><ImplementationInport Name="I_C" DataType="FLOAT32"></ImplementationInport><ImplementationInport Name="Enable" DataType="BOOL"></ImplementationInport></InportContainer><OutportContainer><ImplementationOutport Name="U_A" DataType="FLOAT32"></ImplementationOutport><ImplementationOutport Name="U_B" DataType="FLOAT32"></ImplementationOutport><ImplementationOutport Name="U_C" DataType="FLOAT32"></ImplementationOutport><ImplementationOutport Name="Ready" DataType="BOOL"></ImplementationOutport><ImplementationOutport Name="phi0" DataType="FLOAT32"></ImplementationOutport></OutportContainer><ParameterContainer><ImplementationParameter Name="u_pulse" DataType="FLOAT32" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Magnitude of voltage phasor</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="t_pulse" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Pulse width</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="t_period" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Duration of one injection period</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="timer" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Loop counter</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="dir" DataType="INT8" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Direction of voltage pulse: DIR=-1-&gt;neg. Phase A, -2=neg. phase B, -3=neg. phase C, 1=phase A, 2=phase B, 3=phase C</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="phi" DataType="FLOAT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Commutation angle during pulsing</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ia_pos" DataType="FLOAT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase A direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ia_neg" DataType="FLOAT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase A direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ib_pos" DataType="FLOAT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase B direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ib_neg" DataType="FLOAT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase B direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ic_pos" DataType="FLOAT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase C direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ic_neg" DataType="FLOAT32" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase C direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter></ParameterContainer><Conversion Type="Java"></Conversion><FunctionLink Status="false" BlockName="" ImplementationName=""></FunctionLink></Implementation><Implementation Id="4" Name="Float64" FriendlyName="64 Bit Floating Point" Author="sfragner" Revision="1" DateCreated="2020-11-20" DateLastChange="2020-11-20" CFileName="InitPosDetect_Float64.c" HFileName="InitPosDetect_Float64.h" UpdateEnabled="true" ChecksumCFile="" ChecksumHFile="" AllowEmptyLoadFnc="false"><Description>64 Bit Floating Point Implementation</Description><InportContainer><ImplementationInport Name="I_A" DataType="FLOAT64"></ImplementationInport><ImplementationInport Name="I_B" DataType="FLOAT64"></ImplementationInport><ImplementationInport Name="I_C" DataType="FLOAT64"></ImplementationInport><ImplementationInport Name="Enable" DataType="BOOL"></ImplementationInport></InportContainer><OutportContainer><ImplementationOutport Name="U_A" DataType="FLOAT64"></ImplementationOutport><ImplementationOutport Name="U_B" DataType="FLOAT64"></ImplementationOutport><ImplementationOutport Name="U_C" DataType="FLOAT64"></ImplementationOutport><ImplementationOutport Name="Ready" DataType="FLOAT64"></ImplementationOutport><ImplementationOutport Name="phi0" DataType="FLOAT64"></ImplementationOutport></OutportContainer><ParameterContainer><ImplementationParameter Name="u_pulse" DataType="FLOAT64" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Magnitude of voltage phasor</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="t_pulse" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Pulse width</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="t_period" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Duration of one injection period</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="timer" DataType="INT16" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Loop counter</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="dir" DataType="INT8" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Direction of voltage pulse: DIR=-1-&gt;neg. Phase A, -2=neg. phase B, -3=neg. phase C, 1=phase A, 2=phase B, 3=phase C</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="phi" DataType="FLOAT64" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Commutation angle during pulsing</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ia_pos" DataType="FLOAT64" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase A direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ia_neg" DataType="FLOAT64" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase A direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ib_pos" DataType="FLOAT64" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase B direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ib_neg" DataType="FLOAT64" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase B direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ic_pos" DataType="FLOAT64" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in phase C direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="max_ic_neg" DataType="FLOAT64" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Maximum current in negative phase C direction</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter></ParameterContainer><Conversion Type="Java"></Conversion><FunctionLink Status="false" BlockName="" ImplementationName=""></FunctionLink></Implementation></ExistingImplementationContainer><UsedImplementation></UsedImplementation></ImplementationConfig></ControlBlock>
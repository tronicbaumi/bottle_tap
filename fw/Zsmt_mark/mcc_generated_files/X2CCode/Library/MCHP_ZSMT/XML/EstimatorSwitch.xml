<?xml version="1.0" encoding="utf-8"?><!--V.0.29--><ControlBlock BlockId="607" BlockName="EstimatorSwitch" LibraryName="MCHP_ZSMT" Author="rkothbauer" Revision="1" DateCreated="2016-12-22" DateLastChange="2020-11-25" Prompt="X2C Estimator Switch Block" Order="0" SampleTimeFactor="1" TexFile="EstimatorSwitch_Info" LibraryType="INTERNAL" PreNameSpace="at.lcm.x2c" DefaultImplementation="FiP16" DirectFeedThrough="true" ParameterId="0" IsStaticId="false" IsConversionOnTarget="false" TaskLabel=""><BlockLicense Type="Commercial (LCM)"><CopyrightStatement>Copyright (c) 2014, Linz Center of Mechatronics GmbH (LCM) http://www.lcm.at/
All rights reserved.</CopyrightStatement><LicenseStatement></LicenseStatement><Header>This file is part of X2C. http://www.mechatronic-simulation.org/
$LastChangedRevision: 2108 $</Header></BlockLicense><Description>Implements switching policy between sensorless algorithms for low and high speeds. Decision base is the speed magnitude.
Handle with caution: it is implemented as a switch, so there is no soft transition.</Description><Mask Name="Mask"><InportContainer><MaskInport Name="phi_H"><Description>Estimated rotor angle from algorithm for high speeds</Description><ConnectedOutport Name=""><BlockLink Name=""></BlockLink></ConnectedOutport></MaskInport><MaskInport Name="phi_L"><Description>Estimated rotor angle from algorithm for low speeds</Description><ConnectedOutport Name=""><BlockLink Name=""></BlockLink></ConnectedOutport></MaskInport><MaskInport Name="n_H"><Description>Estimated rotor speed from algorithm for high speeds</Description><ConnectedOutport Name=""><BlockLink Name=""></BlockLink></ConnectedOutport></MaskInport><MaskInport Name="n_L"><Description>Estimated rotor speed from algorithm for low speeds</Description><ConnectedOutport Name=""><BlockLink Name=""></BlockLink></ConnectedOutport></MaskInport></InportContainer><OutportContainer><MaskOutport Name="phi"><Description>Used estimated rotor angle</Description></MaskOutport><MaskOutport Name="n"><Description>Used estimated rotor speed</Description></MaskOutport><MaskOutport Name="Enable_H"><Description>Enable estimator for high speeds</Description></MaskOutport><MaskOutport Name="Enable_L"><Description>Enable estimator for low speeds</Description></MaskOutport></OutportContainer><ParameterContainer><MaskParameter Name="thresh_up" Prompt="Speed up threshold [rpm]"><Description>Speed threshold for switching from low to high speed estimated values</Description><MaskDouble><Value><Numeric>1000.0</Numeric></Value><DefaultValue><Numeric>1000.0</Numeric></DefaultValue></MaskDouble></MaskParameter><MaskParameter Name="thresh_down" Prompt="Speed down threshold [rpm]"><Description>Speed threshold for switching from high to low speed estimated values</Description><MaskDouble><Value><Numeric>600.0</Numeric></Value><DefaultValue><Numeric>600.0</Numeric></DefaultValue></MaskDouble></MaskParameter><MaskParameter Name="n_max" Prompt="Scaling: n_max [rpm]"><Description>Maximum (mechanical) speed
(Only used for scaling in fixed point implementations)</Description><MaskDouble><Value><Numeric>32768.0</Numeric></Value><DefaultValue><Numeric>32768.0</Numeric></DefaultValue></MaskDouble></MaskParameter><MaskParameter Name="ts_fact" Prompt="SampleTime Multiplier"><Description>Multiplication factor of base sampling time (in integer format).</Description><MaskDouble><Value><Numeric>4.0</Numeric></Value><DefaultValue><Numeric>4.0</Numeric></DefaultValue></MaskDouble></MaskParameter></ParameterContainer><Visualizations><Visualization Name="Matlab" Type="VisualizationMatlab"><Command><Item>patch([0 0 1 1], [1 0.5 0.75 1], [0.91 0.84 0])</Item><Item></Item><Item>port_label('input', 1, '\phi_{H}', 'texmode', 'on')</Item><Item>port_label('input', 2, '\phi_{L}', 'texmode', 'on')</Item><Item>port_label('input', 3, 'n_{H}', 'texmode', 'on')</Item><Item>port_label('input', 4, 'n_{L}', 'texmode', 'on')</Item><Item></Item><Item>port_label('output', 1, '\phi', 'texmode', 'on');</Item><Item>port_label('output', 2, 'n', 'texmode', 'on');</Item><Item>port_label('output', 3, 'Enable_{H}', 'texmode', 'on');</Item><Item>port_label('output', 4, 'Enable_{L}', 'texmode', 'on');</Item><Item></Item><Item>image([getenv(char(at.lcm.x2c.utils.Utils.ENV_VAR_NAME)),'Library\General\Doc\Images\AutoSwitch.svg'],[0.2 0.2 0.6 0.6])</Item></Command></Visualization><Visualization Name="ScilabXcos" Type="VisualizationScilabXcos"><ScriptDefineSection></ScriptDefineSection><ScriptPlotSection></ScriptPlotSection><ScriptStyle><Item>style.image = "file:///" + curDir + "/../Doc/Images/EstimatorSwitch.svg"</Item></ScriptStyle><BlockIconDefaultSize>[5 5]</BlockIconDefaultSize></Visualization></Visualizations></Mask><ImplementationConfig><ExistingImplementationContainer><Implementation Id="1" Name="FiP16" FriendlyName="16 Bit Fixed Point" Author="rkothbauer" Revision="1" DateCreated="2016-12-22" DateLastChange="2020-12-07" CFileName="EstimatorSwitch_FiP16.c" HFileName="EstimatorSwitch_FiP16.h" UpdateEnabled="true" ChecksumCFile="" ChecksumHFile="" AllowEmptyLoadFnc="false"><Description>16 Bit Fixed Point Implementation</Description><InportContainer><ImplementationInport Name="phi_H" DataType="INT16"></ImplementationInport><ImplementationInport Name="phi_L" DataType="INT16"></ImplementationInport><ImplementationInport Name="n_H" DataType="INT16"></ImplementationInport><ImplementationInport Name="n_L" DataType="INT16"></ImplementationInport></InportContainer><OutportContainer><ImplementationOutport Name="phi" DataType="INT16"></ImplementationOutport><ImplementationOutport Name="n" DataType="INT16"></ImplementationOutport><ImplementationOutport Name="Enable_H" DataType="BOOL"></ImplementationOutport><ImplementationOutport Name="Enable_L" DataType="BOOL"></ImplementationOutport></OutportContainer><ParameterContainer><ImplementationParameter Name="thresh_up" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Speed threshold when speeding up.
speed &gt;= thresh_up --&gt; high speed estimator is used</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="thresh_down" DataType="INT16" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Speed threshold when speeding down.
speed &lt; thres_down --&gt; low speed estimator is used</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="status" DataType="INT8" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Current state of internal state machine.</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter></ParameterContainer><Conversion Type="Java"></Conversion><FunctionLink Status="false" BlockName="" ImplementationName=""></FunctionLink></Implementation><Implementation Id="2" Name="FiP32" FriendlyName="32 Bit Fixed Point" Author="sfragner" Revision="1" DateCreated="2020-07-17" DateLastChange="2020-12-07" CFileName="EstimatorSwitch_FiP32.c" HFileName="EstimatorSwitch_FiP32.h" UpdateEnabled="true" ChecksumCFile="" ChecksumHFile="" AllowEmptyLoadFnc="false"><Description>32 Bit Fixed Point Implementation</Description><InportContainer><ImplementationInport Name="phi_H" DataType="INT32"></ImplementationInport><ImplementationInport Name="phi_L" DataType="INT32"></ImplementationInport><ImplementationInport Name="n_H" DataType="INT32"></ImplementationInport><ImplementationInport Name="n_L" DataType="INT32"></ImplementationInport></InportContainer><OutportContainer><ImplementationOutport Name="phi" DataType="INT32"></ImplementationOutport><ImplementationOutport Name="n" DataType="INT32"></ImplementationOutport><ImplementationOutport Name="Enable_H" DataType="BOOL"></ImplementationOutport><ImplementationOutport Name="Enable_L" DataType="BOOL"></ImplementationOutport></OutportContainer><ParameterContainer><ImplementationParameter Name="thresh_up" DataType="INT32" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Speed threshold when speeding up.
speed &gt;= thresh_up --&gt; high speed estimator is used</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="thresh_down" DataType="INT32" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Speed threshold when speeding down.
speed &lt; thres_down --&gt; low speed estimator is used</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="status" DataType="INT8" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Current state of internal state machine.</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter></ParameterContainer><Conversion Type="Java"></Conversion><FunctionLink Status="false" BlockName="" ImplementationName=""></FunctionLink></Implementation><Implementation Id="3" Name="Float32" FriendlyName="32 Bit Floating Point" Author="sfragner" Revision="1" DateCreated="2020-07-17" DateLastChange="2020-11-25" CFileName="EstimatorSwitch_Float32.c" HFileName="EstimatorSwitch_Float32.h" UpdateEnabled="true" ChecksumCFile="" ChecksumHFile="" AllowEmptyLoadFnc="false"><Description>32 Bit Floating Point Implementation</Description><InportContainer><ImplementationInport Name="phi_H" DataType="FLOAT32"></ImplementationInport><ImplementationInport Name="phi_L" DataType="FLOAT32"></ImplementationInport><ImplementationInport Name="n_H" DataType="FLOAT32"></ImplementationInport><ImplementationInport Name="n_L" DataType="FLOAT32"></ImplementationInport></InportContainer><OutportContainer><ImplementationOutport Name="phi" DataType="FLOAT32"></ImplementationOutport><ImplementationOutport Name="n" DataType="FLOAT32"></ImplementationOutport><ImplementationOutport Name="Enable_H" DataType="BOOL"></ImplementationOutport><ImplementationOutport Name="Enable_L" DataType="BOOL"></ImplementationOutport></OutportContainer><ParameterContainer><ImplementationParameter Name="thresh_up" DataType="FLOAT32" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Speed threshold when speeding up.
speed &gt;= thresh_up --&gt; high speed estimator is used</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="thresh_down" DataType="FLOAT32" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Speed threshold when speeding down.
speed &lt; thres_down --&gt; low speed estimator is used</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="status" DataType="INT8" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Current state of internal state machine.</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter></ParameterContainer><Conversion Type="Java"></Conversion><FunctionLink Status="false" BlockName="" ImplementationName=""></FunctionLink></Implementation><Implementation Id="4" Name="Float64" FriendlyName="64 Bit Floating Point" Author="sfragner" Revision="1" DateCreated="2020-11-25" DateLastChange="2020-11-25" CFileName="EstimatorSwitch_Float64.c" HFileName="EstimatorSwitch_Float64.h" UpdateEnabled="true" ChecksumCFile="" ChecksumHFile="" AllowEmptyLoadFnc="false"><Description>64 Bit Floating Point Implementation</Description><InportContainer><ImplementationInport Name="phi_H" DataType="FLOAT64"></ImplementationInport><ImplementationInport Name="phi_L" DataType="FLOAT64"></ImplementationInport><ImplementationInport Name="n_H" DataType="FLOAT64"></ImplementationInport><ImplementationInport Name="n_L" DataType="FLOAT64"></ImplementationInport></InportContainer><OutportContainer><ImplementationOutport Name="phi" DataType="FLOAT64"></ImplementationOutport><ImplementationOutport Name="n" DataType="FLOAT64"></ImplementationOutport><ImplementationOutport Name="Enable_H" DataType="BOOL"></ImplementationOutport><ImplementationOutport Name="Enable_L" DataType="BOOL"></ImplementationOutport></OutportContainer><ParameterContainer><ImplementationParameter Name="thresh_up" DataType="FLOAT64" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Speed threshold when speeding up.
speed &gt;= thresh_up --&gt; high speed estimator is used</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="thresh_down" DataType="FLOAT64" isLoadable="true" isSaveable="true" isArray="false" isFlashArray="false" arraySize="0"><Description>Speed threshold when speeding down.
speed &lt; thres_down --&gt; low speed estimator is used</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter><ImplementationParameter Name="status" DataType="INT8" isLoadable="false" isSaveable="false" isArray="false" isFlashArray="false" arraySize="0"><Description>Current state of internal state machine.</Description><Value><Numeric>0.0</Numeric></Value></ImplementationParameter></ParameterContainer><Conversion Type="Java"></Conversion><FunctionLink Status="false" BlockName="" ImplementationName=""></FunctionLink></Implementation></ExistingImplementationContainer><UsedImplementation></UsedImplementation></ImplementationConfig></ControlBlock>